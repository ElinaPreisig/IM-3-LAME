<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="css/styles_bestenliste.css">
    <title>Game Übersicht</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.29.0/dist/umd/supabase.min.js"></script>
</head>

<body>
    <div class="container">
        <a href="index.html">
            <img src="img/logo.png" alt="Logo" class="logo">
        </a>
        <img src="img/elgatto.png" alt="Katze" class="katze" onclick="playSoundEffect()">
        
        <button class="back-button"><a href="suche.html">Zurück</a></button>
        
        <div class="bestenliste">
            <div class="bestenliste-header">Bestenliste</div>
            <table id="bestenliste-table">
                <thead>
                    <tr>
                        <th>Quiz</th>
                        <th>Name</th>
                        <th>Zeit</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Die Daten werden hier dynamisch eingefügt -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Audio-Element für den Soundeffekt -->
    <audio id="soundEffect">
        <source src="audio/mpeg/moew01.mp3" type="audio/mpeg">
        <!-- Füge hier alternative Quellen oder Formate für den Soundeffekt hinzu -->
    </audio>

    <script>
        function playSoundEffect() {
            var audio = document.getElementById('soundEffect');
            audio.play();
        }

        document.addEventListener('DOMContentLoaded', async function () {
            const supabaseUrl = 'https://your-supabase-url.com';
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRlbm9qb3hseXF1dnFhY2tnZWlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTYzMTY3NzAsImV4cCI6MjAxMTg5Mjc3MH0.4ZX9-F1GNCgWSmLleh5QLyDNkE1MljglPV54eemu-2w';
            const supabase = createClient(supabaseUrl, supabaseKey);

            // Daten von Supabase abrufen
            const { data, error } = await supabase
                .from('Spielzeit')
                .select('name_game, name_user, spielzeit')
                .order('spielzeit', { ascending: true })
                .limit(5);

            if (error) {
                console.error('Fehler beim Abrufen der Daten:', error);
                return;
            }

            // Daten in die Tabelle einfügen
            const bestenlisteTable = document.getElementById('bestenliste-table');
            const tbody = bestenlisteTable.querySelector('tbody');

            data.forEach((eintrag, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${eintrag.name_game}</td>
                    <td>${eintrag.name_user}</td>
                    <td>${eintrag.spielzeit}</td>
                `;
                tbody.appendChild(row);
            });
        });
    </script>
</body>
</html>

